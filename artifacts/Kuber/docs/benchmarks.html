<!DOCTYPE html><html lang="en-US">
<!-- Mirrored from kubercostoptimizer.github.io/docs/benchmarks by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 22 Dec 2021 02:13:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><title>Benchmarks -</title><link rel="shortcut icon" href="../favicon.ico" type="image/x-icon"><link rel="stylesheet" href="../assets/css/just-the-docs.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2709176-10"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', "UA-2709176-10"); </script> <script type="text/javascript" src="../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Benchmarks</title><meta name="generator" content="Jekyll v3.9.0" /><meta property="og:title" content="Benchmarks" /><meta property="og:locale" content="en_US" /><meta name="description" content="A Jekyll theme for documentation" /><meta property="og:description" content="A Jekyll theme for documentation" /><link rel="canonical" href="benchmarks.html" /><meta property="og:url" content="https://kubercostoptimizer.github.io/docs/benchmarks" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Benchmarks" /> <script type="application/ld+json"> {"description":"A Jekyll theme for documentation","url":"https://kubercostoptimizer.github.io/docs/benchmarks","@type":"WebPage","headline":"Benchmarks","@context":"https://schema.org"}</script><body><div class="page-wrap"><div class="side-bar"><div class="site-header"> <a href="../index.html" class="site-title lh-tight"></a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button></div><div class="navigation main-nav js-main-nav"><nav role="navigation" aria-label="Main navigation"><ul class="navigation-list"><li class="navigation-list-item"><a href="../index.html" class="navigation-list-link">Home</a><li class="navigation-list-item"><a href="Implementation.html" class="navigation-list-link">Implementation</a><li class="navigation-list-item active"><a href="benchmarks.html" class="navigation-list-link active">Benchmarks</a><li class="navigation-list-item"><a href="results.html" class="navigation-list-link">Results</a></ul></nav></div><footer class="site-footer"><p class="text-small text-grey-dk-000 mb-4"></p><p class="text-small text-grey-dk-000 mb-4">More information will be available after the review process.</p></footer></div><div class="main-content-wrap js-main-content" tabindex="0"><div class="main-content"><div class="page-header js-page-header"><div class="search"><div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search " aria-label="Search " autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg></div><div class="js-search-results search-results-wrap"></div></div></div><div class="page"><div id="main-content" class="page-content" role="main"><h1 id="benchmarks-used-in-evaluation"> <a href="#benchmarks-used-in-evaluation" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Benchmarks Used in Evaluation</h1><hr /><p>The table below contains the original and the instrumented versions of each benchmark application used in the evaluation of Kuber. In our instrumentation, we added traces to each API to calculate the execution time of the API while subtracting the execution times of the APIs it triggers.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">Benchmark Name<th style="text-align: center">Number of Services<th>Orginal Repo<th>Changed Repo<tbody><tr><td style="text-align: left">Hotel Reservation<td style="text-align: center">8<td><a href="https://github.com/delimitrou/DeathStarBench/tree/master/hotelReservation">link</a><td><a href="https://github.com/kubercostoptimizer/Kuber/tree/master/code/apps/hotel-reservation/code">link</a><tr><td style="text-align: left">Media Microsvc<td style="text-align: center">11<td><a href="https://github.com/delimitrou/DeathStarBench/tree/master/mediaMicroservices">link</a><td><a href="https://github.com/kubercostoptimizer/Kuber/tree/master/code/apps/media-microsvc/code">link</a><tr><td style="text-align: left">Social Network<td style="text-align: center">12<td><a href="https://github.com/delimitrou/DeathStarBench/tree/master/hotelReservation">link</a><td><a href="https://github.com/kubercostoptimizer/Kuber/tree/master/code/apps/social-network/code">link</a><tr><td style="text-align: left">Sockshop<td style="text-align: center">7<td><a href="https://github.com/microservices-demo">link</a><td><a href="https://github.com/kubercostoptimizer/Kuber/tree/master/code/apps/sock-shop/code">link</a></table></div><p>An example of the instrumented GET API of the Catalogue service in the SockShop application is below. Here, we subtract the response time of the database call from the API execution time.</p><div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 
 <span class="c">// Original API definition</span>
<span class="k">func</span> <span class="p">(</span><span class="n">s</span> <span class="o">*</span><span class="n">catalogueService</span><span class="p">)</span> <span class="n">Get</span><span class="p">(</span><span class="n">id</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="n">Sock</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>   
        <span class="c">// other code</span>
        <span class="n">err</span> <span class="o">:=</span> <span class="n">s</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sock</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span>
        <span class="c">// other code</span>
        <span class="k">return</span> <span class="n">sock</span><span class="p">,</span> <span class="no">nil</span>
<span class="p">}</span>
 
 <span class="c">// API definition with execution time calculations </span>
<span class="k">func</span> <span class="p">(</span><span class="n">s</span> <span class="o">*</span><span class="n">catalogueService</span><span class="p">)</span> <span class="n">Get</span><span class="p">(</span><span class="n">id</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="n">Sock</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">start</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span> <span class="c">// &lt;- Start Timer for API Total Execution time</span>
      <span class="n">elapsed_external_call_time</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="m">0</span><span class="p">)</span>
      <span class="n">span</span> <span class="o">:=</span> <span class="n">opentracing</span><span class="o">.</span><span class="n">StartSpan</span><span class="p">(</span><span class="s">"Get"</span><span class="p">)</span>

      <span class="c">// Other code</span>
 
      <span class="n">external_call_2</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span>
      <span class="n">err</span> <span class="o">:=</span> <span class="n">s</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sock</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span>  <span class="c">// &lt;- External Call</span>
      <span class="n">elapsed_external_call_time</span> <span class="o">=</span> <span class="n">elapsed_external_call_time</span> <span class="o">+</span> <span class="n">time</span><span class="o">.</span><span class="n">Since</span><span class="p">(</span><span class="n">external_call_2</span><span class="p">)</span>

      <span class="c">// Other code</span>
      
      <span class="n">elapsed</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Since</span><span class="p">(</span><span class="n">start</span><span class="p">)</span> <span class="c">// &lt;- end Timer for API Total Execution time</span>
      <span class="n">elapsed</span> <span class="o">=</span> <span class="n">elapsed</span> <span class="o">-</span> <span class="n">elapsed_external_call_time</span>
      <span class="n">span</span><span class="o">.</span><span class="n">LogKV</span><span class="p">(</span><span class="s">"runtime_ms"</span><span class="p">,</span><span class="kt">float64</span><span class="p">(</span><span class="n">elapsed</span><span class="p">)</span><span class="o">/</span><span class="kt">float64</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Millisecond</span><span class="p">))</span> <span class="c">// &lt;- send data to Istio</span>
      <span class="n">span</span><span class="o">.</span><span class="n">Finish</span><span class="p">()</span>
      <span class="k">return</span> <span class="n">sock</span><span class="p">,</span> <span class="no">nil</span>
<span class="p">}</span>

</code></pre></div></div></div></div></div></div>
